{% extends "dashboard.html" %}

{% block search %}
{% endblock %}

{% block search_button %}
{% endblock %}

{% block search_mobile %}
{% endblock %}

{% block messages %}
  <div class="messages"></div>
{% endblock %}

{% block content %}
  <div class="notifications">
    <h1>
      <img src="/static/img/alerts/notification-black.svg" alt="" role="presentation">
      Notification Center
      <span class="alerts-count">{{ user.alerts['visible_alerts']|count }}<span class="visually-hidden"> notifications</span></span>
    </h1>

    {% for alert in user.alerts['visible_alerts'] %}
      <div class="alert-panel">
        <div class="alert-header alert-{{ alert.risk }}">
          <span class="alert-risk">
            {{ alert.risk }} risk
          </span>
        </div>
        <div class="alert-body">
          <div class="alert-datetime">
            {{ alert.date }}
          </div>
          <div class="alert-summary">
            {{ alert.summary }}
          </div>
          <div class="alert-description">
            {{ alert.description }}
          </div>
          <a href="{{ alert.url }}" class="mui-btn">
            <img src="/static/img/alerts/arrow-right-black.svg" alt="">
            {{ alert.url_title }}
          </a>
          <span class="mui-btn" id="dismiss-alert" data-alert-id="{{ alert.get('alert_id') }}">
            Dismiss
          </span>
          <span class="mui-btn" id="escalate-alert" data-alert-id="{{ alert.get('alert_id') }}">
            Escalate to Security
          </span>
          <span class="mui-btn" id="false-positive-alert" data-alert-id="{{ alert.get('alert_id') }}">
            False Positive
          </span>
        </div>
      </div>
    {% endfor %}
  </div>
{% endblock %}

{% block extra_js %}
  <script type="text/javascript" src="/static/js/notifications.js"></script>
{% endblock %}
